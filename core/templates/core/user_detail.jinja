{% extends "core/base.jinja" %}

{% block title %}
    {{ profile.get_display_name() }}'s profile
{% endblock %}

{% block content %}
<h3>User Profile</h3>
<p><a href="{{ url('core:user_list') }}">Back to list</a></p>

<ul>
{% if can_edit(profile, request.user) or user.id == profile.id %}
    <li><a href="{{ url('core:user_edit', user_id=profile.id) }}">Edit</a></li>
{% endif %}
{% if can_edit_prop(profile, request.user) %}
    <li><a href="{{ url('core:user_prop', user_id=profile.id) }}">Props</a></li>
{% endif %}
</ul>

<p>
You're seeing the profile of <strong>{{ profile.get_full_name() }}</strong><br/>
<strong>{{ profile.nick_name }}</strong><br/>
<em>{{ profile.date_of_birth|date("d/m/Y") }}</em>
</p>

<p>
{% if get_subscriber(profile).is_subscribed() %}
User is subscriber until {{ get_subscriber(profile).subscriptions.last().subscription_end }}
{% else %}
User is not subscribed. <a href="{{ url('subscription:subscription') }}?member={{ profile.id }}">New subscription</a>
{% endif %}
</p>

{% endblock %}


