<!DOCTYPE html>
<html lang="fr">
    <head>
        {% block head %}
        <title>{% block title %}{% trans %}Welcome!{% endtrans %}{% endblock %}</title>
        <link rel="stylesheet" href="{{ static('core/base.css') }}">
        <link rel="stylesheet" href="{{ static('core/multiple-select.css') }}">
        <link rel="stylesheet" href="{{ static('core/js/ui/jquery-ui.min.css') }}">
        <link rel="stylesheet" href="{{ static('ajax_select/css/ajax_select.css') }}">
        <link rel="stylesheet" href="{{ static('core/style.css') }}">
        {% endblock %}
    </head>

    <body>
        {% block header %}
        {% if not popup %}
        <div id="logo"><a href="{{ url('core:index') }}"><img src="{{ static('core/img/logo.png') }}"
                                                              alt="{% trans %}Logo{% endtrans %}" /></a></div>
        <header>
            {% if not user.is_authenticated() %}
            <a href="{{ url('core:login') }}">{% trans %}Login{% endtrans %}</a> |
            <a href="{{ url('core:register') }}">{% trans %}Register{% endtrans %}</a>
            {% else %}
            <a href="{{ url('core:user_profile', user_id=user.id) }}">{{ user.get_display_name() }}</a> |
            <a href="{{ url('core:user_tools') }}">{% trans %}Tools{% endtrans %}</a> |
            <a href="{{ url('core:logout') }}">{% trans %}Logout{% endtrans %}</a>
            <form action="{{ url('core:search') }}" method="GET">
                <input type="text" placeholder="{% trans %}Search{% endtrans %}" name="query" id="search" />
                <input type="submit" value="{% trans %}Search{% endtrans %}" style="display: none;" />
            </form>
            {% endif %}
        </header>
        {% else %}
        <div id="popupheader">{{ user.get_display_name() }}</div>
        {% endif %}
        {% endblock %}

        <div id="language_chooser">
            {% for language in LANGUAGES %}
            <form action="{{ url('set_language') }}" method="post">{% csrf_token %}
                <input name="next" value="{{ request.path }}" type="hidden" />
                <input name="language" value="{{ language[0] }}" type="hidden" />
                <input type="submit" value="{{Â language[1]}}" />
            </form>
            {% endfor %}
        </div>

        {% block nav %}
        {% if not popup %}
        <nav>
            <a href="{{ url('core:user_list') }}">{% trans %}Users{% endtrans %}</a>
            <a href="{{ url('core:page', page_name="Index") }}">{% trans %}Wiki{% endtrans %}</a>
            <a href="{{ url('core:page_list') }}">{% trans %}Pages{% endtrans %}</a>
            <a href="{{ url('club:club_list') }}">{% trans %}Clubs{% endtrans %}</a>
            <a href="{{ url('core:page', "services") }}">{% trans %}Services{% endtrans %}</a>
        </nav>
        {% endif %}
        {% endblock %}

        <div id="content">
            {% if error %}
            {{ error }}
            {% endif %}
            {% block content %}
            {% endblock %}
        </div>

        {% if not popup %}
        <footer>
            {% block footer %}
            {% trans %}Site made by good people{% endtrans %}
            {% endblock %}
        </footer>
        {% endif %}
        <!--
            {% block tests %}
            {{ tests }}
            {% endblock %}
        -->
        {% block script %}
        <script src="{{ static('core/js/jquery-3.1.0.min.js') }}"></script>
        <script src="{{ static('core/js/ui/jquery-ui.min.js') }}"></script>
        <script src="{{ static('core/js/ui/i18n/datepicker-fr.js') }}"></script>
        <script src="{{ static('core/js/multiple-select.js') }}"></script>
        <script src="{{ static('ajax_select/js/ajax_select.js') }}"></script>
        <script src="{{ static('core/js/script.js') }}"></script>
        <script>
$('.select_single').multipleSelect({
    single: true,
    {% if not popup %}
    position: 'top',
    {% endif %}
});
$('.select_multiple').multipleSelect({
    filter: true,
    {% if not popup %}
    position: 'top',
    {% endif %}
});
$('.select_date').datepicker({
    changeMonth: true,
    changeYear: true,
    dayNamesShort: $.datepicker.regional[ "{{ request.LANGUAGE_CODE }}"  ].dayNamesShort,
    dayNames: $.datepicker.regional[ "{{ request.LANGUAGE_CODE }}"  ].dayNames,
    monthNamesShort: $.datepicker.regional[ "{{ request.LANGUAGE_CODE }}"  ].monthNamesShort,
    monthNames: $.datepicker.regional[ "{{ request.LANGUAGE_CODE }}"  ].monthNames,
}).datepicker( $.datepicker.regional[ "{{ request.LANGUAGE_CODE }}"] );
$(document).keydown(function (e) {
    if ($(e.target).is('input')) { return }
    if ($(e.target).is('textarea')) { return }
    if ($(e.target).is('select')) { return }
    if (e.keyCode == 83) {
        $("#search").focus();
        return false;
    }
});
        </script>
        {% endblock %}
    </body>
</html>
