{% extends "core/base.jinja" %}
{% from "pedagogy/macros.jinja" import display_star %}

{% block title %}
{% trans %}UV Details{% endtrans %}
{% endblock %}

{% block content %}
	<div id="pedagogy">
		<p><a href="{{ url('pedagogy:guide') }}">{% trans %}Back{% endtrans %}</a></p>
		{# <button onclick="window.history.back();">{% trans %}Back{% endtrans %}</button> #}

		<h1>{{ object.code }} - {{ object.title }}</h1>
		<p style = "word-spacing: 20px;">{{ object.department }} {{ object.credit_type }} {{ object.semester_translated }}</p>
		<p>{{ object.objectives|markdown }}</p>
		<p>{{ object.program|markdown }}</p>
		<p>{{ object.skills|markdown }}</p>
		<p>{{ object.key_concepts }}</p>
		<p>{% trans %}UV manager: {% endtrans %}{{ object.manager }}</p>

		<p>{{ display_star(object.grade_global_average) }}</p>
		<p>{{ display_star(object.grade_utility_average) }}</p>
		<p>{{ display_star(object.grade_interest_average) }}</p>
		<p>{{ display_star(object.grade_teaching_average) }}</p>
		<p>{{ display_star(object.grade_work_load_average) }}</p>

		{% if object.comments.exists() %}
			<h2>{% trans %}Comments{% endtrans %}</h2>
			{% for comment in object.comments.all() %}
				<div id="{{ comment.id }}" class="comment">
					<div class="grade_block">
						<div class="dif_grade">
							<p>{% trans %}global grade{% endtrans %}</p>
							<p>{% trans %}utility grade{% endtrans %}</p>
							<p>{% trans %}interest grade{% endtrans %}</p>
							<p>{% trans %}teaching grade{% endtrans %}</p>
							<p>{% trans %}work_load grade{% endtrans %}</p>
						</div>
						<div class="grade">
							<p>{{ display_star(comment.grade_global) }}</p>
							<p>{{ display_star(comment.grade_utility) }}</p>
							<p>{{ display_star(comment.grade_interest) }}</p>
							<p>{{ display_star(comment.grade_teaching) }}</p>
							<p>{{ display_star(comment.grade_work_load) }}</p>
						</div>
					</div>
					{{ comment.comment|markdown }}

					<div class="info">
						<p class="report"><a href="{{ url('pedagogy:comment_report', comment_id=comment.id) }}">{% trans %}Report this comment{% endtrans %}</a></p>
						<p class="date_info">{{ comment.publish_date.strftime('%d/%m/%Y') }}</p>
						<p class="author_info">{{ comment.author }}</p>
					</div>
					{# Warning, it's not displayed yet #}
					<p class="action">
						<a href="{{ url('pedagogy:uv_detail', uv_id=uv.id) }}#{{ comment.id }}"><i class="fa fa-paragraph"></i></a>
						{% if user.is_owner(comment) %}
							<a href="{{ url('pedagogy:comment_update', comment_id=comment.id) }}">{% trans %}Edit{% endtrans %}</a>
							<a href="{{ url('pedagogy:comment_delete', comment_id=comment.id) }}">{% trans %}Delete{% endtrans %}</a>
						{% endif %}
					</p>
					{% if comment.is_reported %}
						<p>{% trans %}This comment has been reported{% endtrans %}</p>
					{% endif %}

				</div>
			{% endfor %}
		{% endif %}

		<h2>{% trans %}Leave comment{% endtrans %}</h2>
		<form action="{{ url('pedagogy:uv_detail', uv_id=object.id) }}" method="post" enctype="multipart/form-data">
			{% csrf_token %}
			{{ form.as_p() }}
			<p><input type="submit" value="{% trans %}Comment{% endtrans %}" /></p>
		</form>
	</div>
{% endblock %}
